meta {
  name: Post Get NetworkDiagnostics
  type: http
  seq: 2
}

post {
  url: {{protocol}}://{{host}}:{{port}}{{base_path}}/actions
  body: json
  auth: none
}

headers {
  Content-Type: application/vnd.api+json
}

body:json {
  {
    "data": [
      {
        "type": "getNetworkDiagnosticTask",
        "attributes": {
          "destination": "32ba6e34fd4c0299",
          "types": [
            "extAddress",
            "rloc16",
            "leaderData",
            "ipv6Addresses",
            "macCounters",
            "batteryLevel",
            "supplyVoltage",
            "channelPages",
            "maxChildTimeout",
            "lDevIdSubject",
            "iDevIdCert",
            "eui64",
            "version",
            "vendorName",
            "vendorModel",
            "vendorSwVersion",
            "threadStackVersion",
            "children",
            "childIpv6Addresses",
            "routerNeighbor",
            "mleCounters"
          ],
          "timeout": 10
        }
      }
    ]
  }
}

assert {
  res.headers['content-type']: eq application/vnd.api+json
  res.body: isJson
  res.status: eq 200
  res.body.data: isDefined
  res.body.data[0].id: isDefined
  res.body.data[0].attributes.status: isDefined
}
